function GameConnection::RoleReset(%this){	%this.RoleStrength = 1;	%this.RoleComfort = 0;	%this.RoleInterest = 1;	%this.RoleHappiness = 0;		%this.RoleHealth = 0;		%this.RoleCarry = 0;	%this.RoleWear = 0;	%this.RoleRainResist = 0;	%this.RoleSweatResist = 0;		echo("RAC Server: Set Default RoleStrength-"@%this.RoleStrength@"U");	echo("RAC Server: Set Default RoleComfort-"@%this.RoleComfort@"U");	echo("RAC Server: Set Default RoleInterest-"@%this.RoleInterest@"U");	echo("RAC Server: Set Default RoleHappiness-"@%this.RoleHappiness@"U");	echo("RAC: Role Data Reset Done");} // 周期性调用以更新 function GameConnection::RoleUpdate(%this) {	// 更新RoleComfort	%wearWeight = 1;	%rainWeight = 1;	%sweatWeight = 1;	%weightSum = 3;		%lw = %this.LevelWear();	if(%lw == 1)		%wearWeight = 3;	else if(%lw == 2)		%wearWeight = 2;	else if(%lw == 3)		%wearWeight = 1;			%ldr = %this.LevelRainResist();	if(%ldr == 1)		%rainWeight = 3;	else if(%ldr == 3)		%rainWeight = 1;			%lsr = %this.LevelSweatResist();	if(%lsr == 1)		%sweatWeight = 3;	else if(%lsr == 3)		%sweatWeight = 1;			%weightSum = %wearWeight + %rainWeight + %sweatWeight;	%sew = %this.ESWear;	%wearVal =  (%this.RoleWear - %sew)/0.50;	if(%wearVal > 0)		%wearVal = 1 - %wearVal;	else 		%wearVal = 1 + %wearVal;	if(%wearVal < 0)		%wearVal = 0;		%comfort = (%wearVal * %wearWeight + %this.RoleRainResist * %rainWeight + %this.RoleSweatResist * %sweatWeight) / %weightSum;	%this.RoleComfort = %comfort;		// 更新RoleHappiness	%s	= %this.RoleStrength;	%c 	= %this.RoleComfort;	%i 	= %this.RoleInterest;	%happiness = %s * 0.33 + %c * 0.33 + %i * 0.34;	%this.RoleHappiness = %happiness; } // 有状态数据// 1. Server用于公式参数// 2. Client用于UI文字颜色设置function GameConnection::LevelStrength(%this){	%level = 1;	%s = %this.RoleStrength;	if (%s < $ConstLowStrength)		%level = 1;	else if (%s < $ConstPerfStrength)		%level = 2;	else		%level = 3;			return %level;}function GameConnection::LevelComfort(%this){	%level = 1;	%c = %this.RoleComfort;	if(%c < $ConstLowComfort)		%level = 1;	else if(%c < $ConstPerfComfort)		%level = 2;	else		%level = 3;			return %level;}function GameConnection::LevelInterest(%this){	%level = 1;	%i = %this.RoleInterest;	if(%i < $ConstLowInterest)		%level = 1;	else if(%i < $ConstPerfInterest)		%level = 2;	else		%level = 3;			return %level;}function GameConnection::LevelHappiness(%level){	%level = 1;	%h = %this.RoleHappinese;	if(%h < $ConstLowHappiness)		%level = 1;	else if(%h < $ConstPerfHappiness)		%level = 2;	else		%level = 3;			return %level;}function GameConnection::LevelCarry(%this){	%level = 1;	if(%this.RoleCarry > $ConstFineCarry)		%level = 1;	else		%level = 3;			return %level;}function GameConnection::LevelWear(%this){	%level = 1;	%absSub = %this.RoleWear - %this.ESWear;	if (%absSub < 0) %absSub = -%asbSub;		if(%absSub > $ConstLowWear)		%level = 1;	else if(%h > $ConstPerfWear)		%level = 2;	else		%level = 3;			return %level;}function GameConnection::LevelRainResist(%this){	%level = 1;	%esdr = %this.ESRain;	if(%this.RoleRainResist < %esdr)		%level = 1;	else		%level = 3;			return %level;}function GameConnection::LevelSweatResist(%this){	%level = 1;	%essr = %this.ESSweat;	if(%this.RoleSweatResist  < %essr)		%level = 1;	else		%level = 3;		return %level;}